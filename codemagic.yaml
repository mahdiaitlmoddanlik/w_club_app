workflows:
  ios-device-build:
    name: iOS â€“ Development IPA for iPads
    environment:
      flutter: stable
      xcode: latest
      groups:
        - "My App Store Key"   # contains ASC Issuer ID, Key ID, Private Key
      vars:
        BUNDLE_ID: "com.example.wClub"
    scripts:
      - keychain initialize
      - |
          app-store-connect fetch-signing-files "$BUNDLE_ID" \
            --type IOS_APP_DEVELOPMENT \
            --issuer-id "$APP_STORE_CONNECT_ISSUER_ID" \
            --key-id "$APP_STORE_CONNECT_KEY_IDENTIFIER" \
            --private-key "$APP_STORE_CONNECT_PRIVATE_KEY" \
            --create
      - keychain add-certificates
      - xcode-project use-profiles
      - flutter pub get
      - flutter build ipa --export-method development
    artifacts:
      - build/ios/ipa/*.ipa
